(window.webpackJsonp=window.webpackJsonp||[]).push([[405],{461:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return o})),a.d(t,"metadata",(function(){return s})),a.d(t,"rightToc",(function(){return c})),a.d(t,"default",(function(){return h}));var r=a(2),n=a(6),i=(a(0),a(516)),o={title:"Augur V2 Contract Overview"},s={unversionedId:"contracts/overview",id:"contracts/overview",isDocsHomePage:!1,title:"Augur V2 Contract Overview",description:"Augur",source:"@site/../docs/contracts/overview.md",permalink:"/docs/contracts/overview",editUrl:"https://github.com/AugurProject/augur/edit/documentation/augur.sh/../docs/contracts/overview.md",sidebar:"docs",previous:{title:"What Is Augur",permalink:"/docs/SUMMARY"},next:{title:"Contracts",permalink:"/docs/api/contracts/index"}},c=[{value:"Augur",id:"augur",children:[]},{value:"Deployment",id:"deployment",children:[]},{value:"Contract Legitimacy",id:"contract-legitimacy",children:[]},{value:"Contract Events",id:"contract-events",children:[]},{value:"Authorized Token Transfers",id:"authorized-token-transfers",children:[]},{value:"Upgrade Day",id:"upgrade-day",children:[]},{value:"Universes",id:"universes",children:[{value:"Markets",id:"markets",children:[]},{value:"Universe Forking",id:"universe-forking",children:[]},{value:"Reporting Fee",id:"reporting-fee",children:[]},{value:"Reputation Token",id:"reputation-token",children:[]},{value:"Legacy Reputation Token",id:"legacy-reputation-token",children:[]},{value:"Rep Price Oracle",id:"rep-price-oracle",children:[]},{value:"OI",id:"oi",children:[]},{value:"Parasitic OI",id:"parasitic-oi",children:[]},{value:"OI Cash",id:"oi-cash",children:[]},{value:"DSR",id:"dsr",children:[]},{value:"Bond Values",id:"bond-values",children:[]}]},{value:"Markets",id:"markets-1",children:[{value:"Creation Parameters",id:"creation-parameters",children:[]},{value:"Market Types",id:"market-types",children:[]},{value:"REP Bond",id:"rep-bond",children:[]},{value:"Validity Bond",id:"validity-bond",children:[]},{value:"Shares",id:"shares",children:[]},{value:"Resolution",id:"resolution",children:[]},{value:"Affiliates",id:"affiliates",children:[]}]},{value:"Trading",id:"trading",children:[{value:"Augur Trading",id:"augur-trading",children:[]},{value:"Orders",id:"orders",children:[]},{value:"On Chain Trading",id:"on-chain-trading",children:[]},{value:"0x Token Trading",id:"0x-token-trading",children:[]}]},{value:"Reporting",id:"reporting",children:[{value:"Payouts",id:"payouts",children:[]},{value:"Initial Report",id:"initial-report",children:[]},{value:"Disputing",id:"disputing",children:[]},{value:"Resolution / Finalization",id:"resolution--finalization",children:[]},{value:"Dispute Windows",id:"dispute-windows",children:[]}]},{value:"GSN",id:"gsn",children:[{value:"Augur Wallet",id:"augur-wallet",children:[]}]},{value:"Warp Sync",id:"warp-sync",children:[{value:"Warp Sync Contract",id:"warp-sync-contract",children:[]}]}],l={rightToc:c};function h(e){var t=e.components,a=Object(n.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},l,a,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h3",{id:"augur"},"Augur"),Object(i.b)("p",null,"The Augur contract is the first contract in any deployment and serves as:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"The central registry for singleton contracts"),Object(i.b)("li",{parentName:"ul"},"The central authority for which contracts are considered \u201clegitimate\u201d Augur members as opposed to external contracts"),Object(i.b)("li",{parentName:"ul"},"A global contract per deployment for logging, token transfers, and limits on market creation end times")),Object(i.b)("h3",{id:"deployment"},"Deployment"),Object(i.b)("p",null,"When deployed the Augur contract will store the tx sender as the \u201cuploader\u201d. This account has the authority to indicate the singleton contracts for Augur as they are deployed by \u201cregistering\u201d them with an identifying string. For example when the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#contract-responsible-for-providing-a-price-for-the-rep-token"}),"contract responsible for providing a price for the REP token")," is uploaded it is registered with the string \u201cRepOracle\u201d. Other contracts that depend on the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#rep-oracle"}),"Rep Oracle")," contract will look up its address through the Augur contract when they are first initialized."),Object(i.b)("p",null,"At the end of the deployment process the Augur contract has a function called \u201cfinishDeployment\u201d which will revoke authorization to register any new contracts and will emit an event to indicate this has occurred."),Object(i.b)("h3",{id:"contract-legitimacy"},"Contract Legitimacy"),Object(i.b)("p",null,"In addition to storing a registry of the singleton contracts uploaded during deployment the Augur contract contains a variety of mappings which are used to store which generated contracts are legitimate products of the Augur deployment."),Object(i.b)("p",null,"When contract instances are generated, such as:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#markets"}),"Markets")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#universes"}),"Universes")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#bonds"}),"Bonds"))),Object(i.b)("p",null,"They are stored in the Augur mapping so that various contract interactions can validate the legitimacy of a sender claiming for example to be a Market instance."),Object(i.b)("h3",{id:"contract-events"},"Contract Events"),Object(i.b)("p",null,"Augur\u2019s contract events are emitted from the Augur contract in the vast majority of cases. The full list of contract events is available in ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/AugurProject/augur/blob/master/packages/augur-core/source/contracts/Augur.sol#L42"}),"Augur.sol","#","L42"),". This structure means a client can use a single contract address filter while listening to events, or bulk downloading logs, and receive events for all the varied events generated by the contracts."),Object(i.b)("h3",{id:"authorized-token-transfers"},"Authorized Token Transfers"),Object(i.b)("p",null,"Many Augur contracts need to be able to transfer DAI on behalf of the tx sender. Rather than requiring the account to authorize each of these individual contracts the Augur contract maintains a list of \u201ctrusted\u201d contract addresses which may request a transferFrom on their behalf. This reduces the various approvals to users simply approving the Augur contract."),Object(i.b)("p",null,"It should be noted that this only applies to the core Augur contracts. The ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#trading"}),"Trading")," contracts which are discussed later require a variety of additional approvals by users, though this can be largely ignored if the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#augur-wallet"}),"Augur wallet")," is being used."),Object(i.b)("h3",{id:"upgrade-day"},"Upgrade Day"),Object(i.b)("p",null,"When it is desired by a group of developers to deploy a new version of the Augur protocol they must announce their intention to do so with advance notice such that those who intend to switch to it may exit all their funds from the existing version. Because of this the Augur contract has a notion of an \u201cUpgrade day\u201d which occurs on a regular cadence, currently one year from the deploy date, where that date serves as a cutoff for the maximum market end date. Markets created within a month of the upgrade day may specify an end date of a month in the future even if that extends past the upgrade day."),Object(i.b)("p",null,"The first upgrade day is a chosen constant and is currently set to be July 15th 2021."),Object(i.b)("h2",{id:"universes"},"Universes"),Object(i.b)("p",null,"A Universe in Augur is a collection of markets and is itself a ",Object(i.b)("strong",{parentName:"p"},"node")," in a ",Object(i.b)("strong",{parentName:"p"},"tree")," of ",Object(i.b)("strong",{parentName:"p"},"interpretations of truth"),". During deployment the initial Universe, called the \u201cGenesis Universe\u201d, is created. The \u201cGenesis Universe\u201d is a blank slate and carries no implicit qualities. It simply contains markets. The Genesis Universe however may end up with Child Universes which are each representative of an interpretation of the truth. For example Child A of the Genesis universe may be the sub-version of the Augur deployment where all participants believe that Hillary Clinton won the 2016 United States presidential election, and Universe B is the version where Donald Trump won. More on this process of Universe creation is detailed in the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#forking"}),"forking")," section."),Object(i.b)("h3",{id:"markets"},"Markets"),Object(i.b)("p",null,"Every Market in Augur is part of a Universe. Aside from the implicit assertions about the nature of reality and truth that are inherited from a Universe there are various on-chain properties that a Market derives from its Universe. In particular the following market relevant properties are all derived from its Universe:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#reporting-fee"}),"Reporting Fee")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#no-show-bond"}),"No Show Bond")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#forking-goal"}),"Forking Goal")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#reputation-token"}),"Reputation Token")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#validity-bond"}),"Validity Bond"))),Object(i.b)("h3",{id:"universe-forking"},"Universe Forking"),Object(i.b)("p",null,"Each Universe on Augur maintains a threshold called the \u201cfork threshold\u201d. This value is the amount of ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#rep"}),"REP")," within a single ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#dispute-bond"}),"dispute bond")," which will trigger the process known as a fork. The fork threshold is set to be:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"0.025 * ReputationToken.getTotalTheoreticalSupply()\n")),Object(i.b)("p",null,"When this occurs the Universe will be capable of generating child universes in accordance with the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#market"}),"Market")," corresponding to the triggering ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#dispute-bond"}),"dispute bond"),". In particular a child Universe may be created for every possible legitimate outcome ","(","called a ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview"}),"payout",")")," for the market. Any child universe created this way represents a version of Augur where that payout is considered the truth to all its users."),Object(i.b)("p",null,"More on the resolution of a fork can be found in the reporting section ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#reporting"}),"here"),"."),Object(i.b)("h3",{id:"reporting-fee"},"Reporting Fee"),Object(i.b)("p",null,"Each Universe has its own fee rate, called the Reporting Fee, that is applied to the sale of ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#shares"}),"Shares")," . This fee is how active REP holders are compensated for maintaining vigilance of the platform and what gives the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#reputation-token"}),"Reputation Token")," inherent value."),Object(i.b)("p",null,"The value of the reporting fee is determined by using the current ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#open-interest"}),"Open Interest")," of the platform and the current value of the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#reputation-token"}),"Reputation Token")," both denominated in DAI. The desire is for income generated for REP holders to give enough value to the REP token such that the REP Market Cap is 5x the value of all funds locked in the platform. In this way until the Market Cap in REP is high enough to provide the desired ratio the reporting fee will continue increasing."),Object(i.b)("p",null,"The calculation of a new reporting fee for a Universe is done with the following algorithm ","(",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/AugurProject/augur/blob/master/packages/augur-core/source/contracts/reporting/Universe.sol#L584"}),"see code"),")",":"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"repTokenMarketCap = repTokenPrice * totalThereticalRepTokenSupply\nrepTokenTargetMarketCap = openInterest * 5\nnewFeeDivisor = previousFee * repTokenMarketCap / repTokenTargetMarketCap\nnewFeeDivisor = Math.max(3, newFeeDivisor)      // Maximum 33.3% Fee\nnewFeeDivisor = Math.min(10000, newFeeDivisor)  // Minimum 0.01% Fee\n")),Object(i.b)("p",null,"The initial reporting fee for any new Universe is 0.01% and the fee is recalculated on demand on a weekly cadence."),Object(i.b)("h3",{id:"reputation-token"},"Reputation Token"),Object(i.b)("p",null,"The Reputation Token, commonly referred to as REP, of a Universe is an ERC20 token which is used to stake on and therefore determine ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#market"}),"Market")," payout ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#resolutions"}),"resolutions"),"."),Object(i.b)("p",null,"The genesis Universe's supply is generated by migrating ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#legacy-reputation-tokens"}),"Legacy Reputation Tokens"),". All other Universes\u2019 supplies are generated by ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#migrating-rep-from-their-parent-universe-during-a-fork"}),"migrating REP from their parent Universe during a fork"),"."),Object(i.b)("p",null,"One often used property of Reputation Tokens is something called \u201cTotal Theoretical Supply\u201d, which is the amount of REP which could in theory end up as part of the actual total supply. For the Genesis universe this is:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-text"}),"totalSupply + Legacy Reputation Token total supply - Legacy REP transferred to address (0 or 1)\n")),Object(i.b)("p",null,"For any child universe it is:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-text"}),"totalSupply + REP which can be migrated from the parent Universe\n")),Object(i.b)("h3",{id:"legacy-reputation-token"},"Legacy Reputation Token"),Object(i.b)("p",null,"The Legacy Reputation Token is the REP token from the V1 deployment of Augur located at:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-text"}),"0x1985365e9f78359a9b6ad760e32412f4a445e862\n")),Object(i.b)("p",null,"Balances in this contract can be migrated into v2 by:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Approving the V2 Genesis Universe Reputation Token contract to transfer an owner\u2019s balance"),Object(i.b)("li",{parentName:"ol"},"Calling the \u201cmigrateFromLegacyReputationToken\u201d method on the V2 Genesis Universe Reputation Token")),Object(i.b)("h3",{id:"rep-price-oracle"},"Rep Price Oracle"),Object(i.b)("p",null,"In order to determine an appropriate ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#reporting-fee"}),"Reporting Fee")," we need to know the price of ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#rep"}),"REP"),". To do this Augur uses a price oracle built on top of Uniswap V2. The oracle contract uses a time weighted average over a 3 day period based on the cumulative token supplies for the REP/DAI uniswap exchnage."),Object(i.b)("h3",{id:"oi"},"OI"),Object(i.b)("p",null,"OI is an abbreviation for \u201cOpen Interest\u201d, which is the amount of funds currently locked in any given Universe which is \u201cat risk\u201d, meaning held in exchange for issued ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#shares"}),"Shares"),"."),Object(i.b)("h3",{id:"parasitic-oi"},"Parasitic OI"),Object(i.b)("p",null,"Parasitic OI is any funds which exist outside of the scope of ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#shares"}),"Shares")," but still resolve according to the payout of a Market. Parasitic OI is bad for Augur as it creates an unknowable amount of funds which if sufficiently high could create an incentive to resolve a market to an incorrect outcome. Currently the system design is vulnerable if the total value of parasitic OI is 2.5x the total OI in Augur ","(","assuming 50% participation in a fork",")","."),Object(i.b)("h3",{id:"oi-cash"},"OI Cash"),Object(i.b)("p",null,"OI Cash represents funds ","(","DAI",")"," that depend on Market resolution but have not purchased shares. These funds are locked up and count toward Open Interest but are not allocated to any particular outcomes on chain. This is used when bridging between other blockchains, allowing Augur to know how much Open Interest it has locked up on the other blockchain and so as to properly account for this OI in fee calculations."),Object(i.b)("h3",{id:"dsr"},"DSR"),Object(i.b)("p",null,"While in Augur any ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#oi"}),"OI")," in the system will be stored within the Dai Savings contract and will accumulate interest. This interest is Universe specific and can be swept into the next pool of ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#fees-for-reporters"}),"fees for reporters")," by anyone at any time."),Object(i.b)("p",null,"One oddity to note with the DSR is that technically a negative interest rate is feasible. Such an event is not handled in the Augur contracts as there has been an explicit assurance that this is considered an attack on the MKR system and would result in a shutdown, which Augur does operate fine with."),Object(i.b)("h3",{id:"bond-values"},"Bond Values"),Object(i.b)("p",null,"There are several bonds that must be placed when a ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#market"}),"Market")," is created. The actual floating value of these bonds is adjusted on a weekly cadence as needed using the same algorithm for all but with different input values for each. Each bond value is based on some accumulated value and compared to a constant target value to determine if the bond should increase or decrease. The floating value algorithm is as follows ","(",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/AugurProject/augur/blob/13c2079b03158583b17210c88b775156b9690a47/packages/augur-core/source/contracts/utility/Formulas.sol#L41"}),"see code"),")",":"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"if(currentPercent <= targetPercent) {\n    scaleFactor = currentPercent / (10 * targetPercent) + 0.9;\n} else {\n    scaleFactor = (currentPercent - targetPercent) / (1 - targetPercent) + 1;\n}\nnewPercent = currentPercent * scaleFactor\n")),Object(i.b)("p",null,"This algorithm results in the value fluctuating between ",Object(i.b)("strong",{parentName:"p"},".9")," ","*"," the previous value and ",Object(i.b)("strong",{parentName:"p"},"2x")," the previous value. The reason Augur drops the value slower than it increases is that once a suitable value has been found it is in the system\u2019s best interest for it to remain at that level. If at any point for example there were enough no shows to double the value it should not immediately drop to its previous level if all designated reports occur."),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),Object(i.b)("strong",{parentName:"th"},"Bond")),Object(i.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),Object(i.b)("strong",{parentName:"th"},"Value Checked")),Object(i.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),Object(i.b)("strong",{parentName:"th"},"Target Percentage")),Object(i.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),Object(i.b)("strong",{parentName:"th"},"Initial Value")))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(i.b)("a",Object(r.a)({parentName:"td"},{href:"/docs/contracts/overview#no-show"}),"No Show")),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"The REP value of ",Object(i.b)("a",Object(r.a)({parentName:"td"},{href:"/docs/contracts/overview#designated-reports"}),"designated reports")," VS No Shows"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"5%"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"0.35 REP")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(i.b)("a",Object(r.a)({parentName:"td"},{href:"/docs/contracts/overview#initial-report"}),"Initial Report")),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"The REP value of incorrect ",Object(i.b)("a",Object(r.a)({parentName:"td"},{href:"/docs/contracts/overview#initial-reports"}),"initial reports")),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"1%"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"0.35 REP")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(i.b)("a",Object(r.a)({parentName:"td"},{href:"/docs/contracts/overview#validity"}),"Validity")),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"The DAI value of validity bonds VS number of Invalid Markets"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"1%"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$10")))),Object(i.b)("p",null,"Each bond is discussed more in the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#markets"}),"Markets")," and ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#reporting"}),"Reporting")," sections."),Object(i.b)("h2",{id:"markets-1"},"Markets"),Object(i.b)("p",null,"Markets are the contract instances encapsulating events which can be predicted in Augur. Nearly everything of interest that occurs in Augur has a Market as the context. This section will largely concern itself with the creation of Markets and the meaning of their various properties since other sections cover more specific means of interaction with them."),Object(i.b)("h3",{id:"creation-parameters"},"Creation Parameters"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Outcomes ","("),Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#categorical"}),Object(i.b)("strong",{parentName:"a"},"Categorical"))," ",Object(i.b)("strong",{parentName:"li"},"Only",")",":")," In a categorical market the name of each outcome must be provided. For example if the market was on the winner of an election each candidate would have their own outcome. For ALL markets the first outcome is always ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#invalid"}),"Invalid")," and is added automatically. For ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview"}),"Yes/No")," and ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#scalar"}),"Scalar")," markets the outcomes are fixed as Invalid / No / Yes and Invalid / Long / Short respectively."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Description:")," The description of a market is the long version of the human readable instructions on how to resolve the market."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Title:")," The title is a short description of the question the market is asking, e.g \u201cWho will win the 2020 United States Presidential Election\u201d"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Min / Max Prices ","("),Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#scalar"}),Object(i.b)("strong",{parentName:"a"},"Scalar"))," ",Object(i.b)("strong",{parentName:"li"},"Only",")",":")," The Min & Max Prices indicate the off chain desired range of prices. In Yes/No and Categorical markets these values are always 0 and 10","*","*","18 respectively, resulting in an off-chain range of 0 and 1. For scalar markets one may desire a custom range such as when tracking the price of a stock. If that stock value is currently $1700 it would make sense to have a min value of 0 and a max value of 3400 ","*"," 10","*","*","18, resulting in a market that is tracking the movement of the share price from complete collapse to doubling."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Num Ticks ","("),Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#scalar"}),Object(i.b)("strong",{parentName:"a"},"Scalar"))," ",Object(i.b)("strong",{parentName:"li"},"Only",")",":")," The \u201cNum Ticks\u201d of a market is the precision of prices and the value of a ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#complete-set-of-shares"}),"complete set of shares"),". In Yes/No and Categorical markets this value is always 100. This results in prices which are denominated in pennies. For scalar markets more novel pricing intervals may be desired such as a market tracking the price of a stock. If that stock value is currently $1700 it could make sense for example to use a Num Ticks value of 3400 which would denominate prices in a dollar if the min/max price range was 0 to 3400 ","*"," 10","*","*","18. If instead a numTicks of 340 was used prices would be in increments of $10."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Market Creator Fee:")," The Market creator fee is a fee extracted during share settlement that is held until a market resolves as ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#valid"}),"valid")," and is then given to the market owner. It can be anywhere in the range of 0% to 15% of the value of sold ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#shares"}),"shares"),"."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Affiliate Validator:")," The Affiliate Validator is a contract reference that may be specified optionally and is used to filter which share settlements will extract an affiliate fee. More information on ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#affiliates"}),"affiliates")," is later in the Markets section."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Affiliate Fee:")," The affiliate fee is a percentage of the Market Creator Fee specified as a divisor which is given to referrers of traders. More information on ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#affiliates"}),"affiliates")," is later in the Markets section."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Designated Reporter:")," The designated reporter is the address which will be able to do the ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#designated-report"}),"designated report")," on a market when it reaches its end time."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"End Time:")," The end time of a market is the time when reporting on the market outcome begins. Trading on the market is never actually halted so this is sometimes referred to as the \u201cReporting Start Time\u201d instead. Typically this value is expected to be some buffer of time after the event or prediction is expected to end.")),Object(i.b)("h3",{id:"market-types"},"Market Types"),Object(i.b)("p",null,"There are currently three \u201ctypes\u201d of markets which all operate the exact same on chain, but have different expectations for resolution and display off chain."),Object(i.b)("h4",{id:"yes--no"},"Yes / No"),Object(i.b)("p",null,"Yes / No markets as one might imagine are events that can be resolved by answering Yes or No. As an example the market \u201cWill event X occur by date D\u201d would be a Yes / No market. When the market resolves shares of exactly one of Invalid, Yes, or No shares will be redeemable for 100 attoDai."),Object(i.b)("h4",{id:"categorical"},"Categorical"),Object(i.b)("p",null,"Categorical markets are markets with ",">"," 2 non-Invalid outcomes. For example a market predicting the winner of an election with 3 or more candidates would be a Categorical. When the market resolves shares of exactly one of these candidate\u2019s or Invalid shares will be redeemable for 100 attoDai."),Object(i.b)("h4",{id:"scalar"},"Scalar"),Object(i.b)("p",null,"Scalar markets are the most unusual of the 3 current market types. They are constructs intended to track a value and pay out according to a position on the value\u2019s directional movement. The most clear example of this is a market tracking the value of a stock. Lets say a stock is currently worth $50. Now let\u2019s say there is a scalar market tracking this stock which has a num tick value of 20, and an off chain range of 40-60. User A believes the value will rise and so places an order to buy LONG shares \u201cat $51\u201d. User B believes that it will go down and takes this order ","(","the same as buying SHORT shares",")","."),Object(i.b)("p",null,"In this scenario User A pays $11 and User B pays $9. The range here is limited to the values 40-60 so when a position is taken it is relative to the range, thus a bid at $51 will end up costing 51-40."),Object(i.b)("p",null,"Now let\u2019s say at market resolution the stock value is $55. This market would pay out holders of LONG shares $15 per share ","(","55-40 == 15",")"," and holders of SHORT shares $5. In this way the position in a scalar market tracks a value and pays out accordingly rather than following a \u201cwinner take all\u201d model like the other market types."),Object(i.b)("h3",{id:"rep-bond"},"REP Bond"),Object(i.b)("p",null,"When a market is created a deposit of REP is required in order to fulfil 2 different bond requirements. The REP required is ",Object(i.b)("strong",{parentName:"p"},"the maximum")," of both:"),Object(i.b)("h4",{id:"no-show-bond"},"No Show Bond"),Object(i.b)("p",null,"The No Show Bond is a REP deposit given to the market to account for the event the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#designated-reporter"}),"designated reporter")," does not show up and provide an initial report for the market. It will float over time relative to the amount of No Show REP bonds in markets against the frequency of designated reporters not showing up. When an initial report occurs this bond is always used to fund that report."),Object(i.b)("h4",{id:"initial-report-bond"},"Initial Report Bond"),Object(i.b)("p",null,"The Initial Report Bond is the value required for the very first ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#payout"}),"payout")," reported during market resolution. It will float over time relative to the proportion of Initial REP bond payments and the number of markets which actually resolve to the initially reported payout."),Object(i.b)("h3",{id:"validity-bond"},"Validity Bond"),Object(i.b)("p",null,"The Validity bond is a DAI deposit given to the market to incentivize the market creator to craft a market which will not resolve as Invalid. If the market resolves as ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#valid"}),"valid")," it will be returned to the creator, otherwise it will be given to the next pool of fees collected for reporters."),Object(i.b)("h3",{id:"shares"},"Shares"),Object(i.b)("p",null,"Shares in a market are the representation of a particular outcome. The contract that manages Shares is an ERC-1155 token where each token id is generated as follows:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-typescript"}),"abi.encodePacked(_market, uint8(_outcome));\n")),Object(i.b)("p",null,"Shares can be created and burned in exchange for DAI through the use of complete sets, or, when the market has ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#finalized"}),"finalized"),", by redeeming shares with a ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#payout"}),"payout")," value."),Object(i.b)("h4",{id:"complete-sets"},"Complete sets"),Object(i.b)("p",null,"A single complete set is 1 share of each outcome in a market. In a ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview"}),"Yes / No")," market a complete set would be 1 share each of Invalid, Yes, and No shares. Shares are only ever generated as complete sets. A complete set can be purchased from the Share Token contract for ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#numticks"}),"numTicks")," attoDAI."),Object(i.b)("h4",{id:"settlement"},"Settlement"),Object(i.b)("p",null,"Settlement is the term used to describe shares being burned in exchange for DAI. Complete Sets may always be burned in exchange for ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#numticks"}),"numTicks")," attoDai. Once a market has ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#finalized"}),"finalized"),", shares may be burned for their ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#payout"}),"payout")," value."),Object(i.b)("p",null,"Though the settlement values are numTicks and the outcome payout, whenever settlement occurs fees are extracted from this settlement. In particular the market creator fee and the reporting fee are subtracted from the settlement value."),Object(i.b)("p",null,"As an example let say a Market has a 1% creator fee and the system currently has a 0.5% reporting fee."),Object(i.b)("h3",{id:"resolution"},"Resolution"),Object(i.b)("p",null,"When a market has reached its end time it enters ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#reporting"}),"Reporting"),", which is the process of finalizing a market with a ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#payout"}),"payout"),". There are 3 important distinctions for how a market can resolve below."),Object(i.b)("h4",{id:"valid"},"Valid"),Object(i.b)("p",null,"In normal circumstances a non-",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#scalar"}),"Scalar")," market will resolve with a payout where one non-Invalid outcome receives numTicks attoDai. More generally they resolve with a normal outcome as the \u201cwinner\u201d. For example in a Yes / No market a normal resolution is for Yes or No to win."),Object(i.b)("p",null,"In Scalar markets a valid outcome will be a payout that distributes numTicks attoDai between the LONG and SHORT outcomes ","(","1 and 2 respectively",")","."),Object(i.b)("h4",{id:"invalid"},"Invalid"),Object(i.b)("p",null,"A Market should resolve as \u201cInvalid\u201d if the outcome cannot be determined. A market with ambiguous rules or where the event ends after the end time of the market are obvious examples that should be resolved as Invalid, however there are a ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"https://themajority.report/precedents"}),"host of other conditions")," that have historically led to Markets resolving Invalid as well."),Object(i.b)("p",null,"When a market is resolved as Invalid Invalid shares will pay out numTicks attoDai and all other shares are worthless."),Object(i.b)("h4",{id:"fork"},"Fork"),Object(i.b)("p",null,"One of the most critical components of the Augur platform is the ability for Markets to resolve in a fork. The concept of a fork is discussed more in the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#universes"}),"Universe "),"section and the process by which a dispute results in a fork is described in the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#reporting"}),"Reporting "),"section."),Object(i.b)("p",null,"From the forking market\u2019s perspective the eventual resolution will actually function just like a normal Valid or Invalid resolution. The way in which the final payout is determined is all that is materially different. Shares will still be redeemable in the same fashion and the payout for those shares follows the same rules."),Object(i.b)("h3",{id:"affiliates"},"Affiliates"),Object(i.b)("p",null,"When ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#settlement"}),"settlement")," occurs and fees are taken if the market has specified an affiliate fee and a market creator fee the system will attempt to award fees for the account that referred the trader causing the transaction."),Object(i.b)("p",null,"An Augur deployment has an \u201cAffiliates\u201d contract which stores a referring address and a browser fingerprint for a given account. During the normal client based setup of an account these are set for them however a user interacting directly with the contracts could set these values manually if desired."),Object(i.b)("p",null,"The fingerprint value is simply used as a naive check to try and filter out self referrals by comparing the fingerprint of the referrer and the account doing the transaction. If they are equal affiliate fees will not be awarded."),Object(i.b)("p",null,"Assuming the market has not specified an Affiliate Validator contract and the fingerprints do not match then the referring address will be given 80% of the market specified affiliate fee and the remaining 20% is kicked back to the transaction sender. This split occurs to incentivize users to have and keep a referrer instead of attempting to avoid or take advantage of the system."),Object(i.b)("p",null,"If an Affiliate Validator contract has been specified there will be an additional validation step before fees are awarded which takes the referring address and the transaction sender address and validates that they are registered in that validator contract and that they do not share an affiliate hash. The intent of this mechanism is to allow markets to opt into an Affiliate system with a central control and KYC process which they trust and expect users to register into."),Object(i.b)("h2",{id:"trading"},"Trading"),Object(i.b)("p",null,"Trading encompasses the high level contract interactions which are used to match users of the protocol that wish to take complementary ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#share"}),"share")," positions in a ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#market"}),"market"),"."),Object(i.b)("p",null,"The trading contracts in the Augur contract repository are actually a collection of external contracts that are deployed alongside the core Augur protocol. This is significant in that if a problem is found in production that is isolated to the trading portion of contracts they can be redeployed safely without a new version of Augur."),Object(i.b)("h3",{id:"augur-trading"},"Augur Trading"),Object(i.b)("p",null,"The Augur Trading contract is the Trading equivalent of the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#augur"}),"Augur")," contract and performs essentially the same functions, but with the contracts which are related to trading instead. The Augur Trading contract does not however serve as a central authority for token transfers within the trading contracts, so individual approval is needed to use them."),Object(i.b)("h3",{id:"orders"},"Orders"),Object(i.b)("p",null,"Orders represent a desire to take a position in a market and have the following qualities:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Type:")," One of BID or ASK, where BID means the order creator wishes to purchase the order\u2019s outcome and ASK means they wish to sell the outcome."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Outcome:")," The outcome the order type pertains to. For example in a ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview"}),"Yes / No market")," this is either Invalid, Yes, or No."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Amount:")," The amount of shares the order creator wishes to buy or sell."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Price:")," The value in DAI of shares being bought or sold.")),Object(i.b)("h4",{id:"order-assets"},"Order Assets"),Object(i.b)("p",null,"When creating orders on chain the creator will need to escrow the appropriate amount of assets in order to fulfill the order. Similarly when filling an order assets must be provided to fulfill the complementary position ","(","the other order type effectively",")",". To demonstrate the cost of fulfilling an order consider an order with the following properties:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Type:")," BID"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Outcome:")," YES"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Amount:")," 10 ","*","*"," 19"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Price:")," 60")),Object(i.b)("p",null,"This order could escrow any of the following combination of assets to cover this order and would end up with the assets shown:"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),Object(i.b)("strong",{parentName:"th"},"DAI")),Object(i.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),Object(i.b)("strong",{parentName:"th"},"NO / INVALID SHARES")),Object(i.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),Object(i.b)("strong",{parentName:"th"},"DAI Received")),Object(i.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),Object(i.b)("strong",{parentName:"th"},"YES SHARES Received")))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$60*10^{19} $$"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$0$$"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$0$$"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$10^{19} $$")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$0$$"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$10^{19} $$"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$40 * 10^{19}$$"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$0$$")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$5",Object(i.b)("em",{parentName:"td"},"60"),"10^{18} $$"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$5*10^{18}$$"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$5",Object(i.b)("em",{parentName:"td"},"40"),"10^{18} $$"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$5*10^{18} $$")))),Object(i.b)("p",null,"If the order had been an ASK instead of a bid, or equivalently if we are observing the asset requirements of the party filling the order, examples of the assets that could be used are:"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),Object(i.b)("strong",{parentName:"th"},"DAI")),Object(i.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),Object(i.b)("strong",{parentName:"th"},"YES SHARES")),Object(i.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),Object(i.b)("strong",{parentName:"th"},"DAI Received")),Object(i.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),Object(i.b)("strong",{parentName:"th"},"NO / INVALID SHARES Received")))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$40 * 10^{19}$$"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$0$$"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$0$$"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$10^{19} $$")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$0$$"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$10^{19} $$"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$60*10^{19} $$"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$0$$")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$5",Object(i.b)("em",{parentName:"td"},"40"),"10^{18} $$"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$5*10^{18}$$"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$5",Object(i.b)("em",{parentName:"td"},"60"),"10^{18} $$"),Object(i.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),"$$5*10^{18} $$")))),Object(i.b)("p",null,"The trading contracts will always prioritize using a user\u2019s Shares over using their DAI."),Object(i.b)("h3",{id:"on-chain-trading"},"On Chain Trading"),Object(i.b)("p",null,"The On Chain trading contracts provide functionality to escrow funds on chain in the form of DAI or ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#shares"}),"Shares")," and let other users take those orders by providing their own funds in a transaction."),Object(i.b)("h4",{id:"canceling-orders"},"Canceling Orders"),Object(i.b)("p",null,"Canceling an on chain order is done with the CancelOrder contract and simply takes the generated ID for an order to cancel in a transaction that must be sent by the order creator."),Object(i.b)("h4",{id:"filling-orders"},"Filling Orders"),Object(i.b)("p",null,"Filling an on chain order is done with the FillOrder contract and takes these arguments:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Order ID:")," The generated ID of the on chain order"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Amount:")," The amount of shares the filler wishes to take"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Trade Group ID:")," An ID provided which is used by higher level contracts to associate trading actions together"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Fingerprint:")," A browser fingerprint used as a naive prevention measure for spoofing a referral in the ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#affiliate"}),"Affiliate")," system.")),Object(i.b)("p",null,"The required assets detailed in the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#order-asset-requirements-section"}),"order asset requirements section")," will be taken from the transaction sender and they will receive the specified assets in return."),Object(i.b)("h4",{id:"trading-1"},"Trading"),Object(i.b)("p",null,"The Trade contract is a somewhat higher level contract that enables one to avoid direct interaction with the contracts to create or fill orders, and instead allows a user to specify a desired position or interaction relative to an existing position via ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#order-parameters"}),"order parameters"),". When a trade is made this way the underlying system will find existing orders to fill first and then if a remaining desired amount is left a new order will be placed."),Object(i.b)("p",null,"One may also specify that no order should be placed and the transaction will simply not completely fill the entire desired trade if insufficient orders are available on chain."),Object(i.b)("h3",{id:"0x-token-trading"},"0x Token Trading"),Object(i.b)("p",null,"Creating orders on chain has some negative aspects. In particular it requires a transaction which means that it is relatively slow ","(","~10 seconds at best, many minutes in congested times",")"," and somewhat expensive."),Object(i.b)("p",null,"By moving orders off chain we make order creation free and allow order cancelation to potentially be much cheaper if done via expiration."),Object(i.b)("p",null,"0x off chain orders still have the same ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#properties"}),"properties")," as on chain orders and the same ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#asset-requirements"}),"asset requirements")," and expectations. The real difference is that they are represented not by a generated ID but by the order properties themselves and a signature of the order creator on those properties. These properties along with the signature can be used by another party that wishes to fill the order as proof that the order creator is willing to take that part of the trade."),Object(i.b)("h4",{id:"zeroxtrade-token"},"ZeroXTrade Token"),Object(i.b)("p",null,"In order to utilize the ZeroX mesh network for sharing off chain orders we comply with their contract protocols by making our orders all pertain to a synthetic asset which takes the form of an ERC 1155 token."),Object(i.b)("p",null,"Token IDs for the ZeroXTrade Token are generated with the order properties as follows:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-typescript"}),"abi.encodePacked(_market, uint80(_price), _outcome, _type);\n")),Object(i.b)("p",null,"In this way an order can be generated for 0x that simply says the creator wishes to trade a certain amount of a ZeroXTrade token with one of these ids and that is enough to convey a trade on Augur."),Object(i.b)("p",null,"The ZeroXTrade token\u2019s typical ERC 1155 protocol functions behave in specialized non standard ways since the token is merely a synthetic used to facilitate 0x trades. In particular:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Transfers")," will fail unless being performed during a trade operation ","(","filling signed orders using the contract",")"," and are no-ops."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"balanceOf")," requests will return the fillable amount for the order properties associated with the token id assuming the address given is the creator of such an order.")),Object(i.b)("h4",{id:"canceling-0x-orders"},"Canceling 0x Orders"),Object(i.b)("p",null,"0x orders, in addition to the standard order properties, have an expiration time associated with it, which will make attempts to fill the order past that time fail. By using this property one can achieve free cancelations if one is also willing to place new orders to replace expired orders that are still desired."),Object(i.b)("p",null,"The other method of canceling orders is simply to provide signed order data in an explicit on chain transaction just like canceling on chain orders works. This is simpler and offers more control but like the on chain variant is slower and more expensive."),Object(i.b)("h4",{id:"filling-0x-orders"},"Filling 0x Orders"),Object(i.b)("p",null,"Since off chain orders are not stored and sorted on chain it is the responsibility of the order filler to provide the orders they wish to fill to a transaction. Because of the specialized nature of filling ZeroXTrade token orders these cannot be filled using the standard 0x mechanisms either. Instead to fill Augur 0x orders the signed order data is provided to the ZeroXTrade token contract through a \u201ctrade\u201d function which takes:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Amount:")," The amount of shares the transaction sender wishes to fill"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Trade Group ID:")," An ID provided which is used by higher level contracts to associate trading actions together"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Fingerprint:")," A browser fingerprint used as a naive prevention measure for spoofing a referral in the ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#affiliate"}),"Affiliate")," system."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Max Protocol Fee:")," An amount of DAI the user is willing to spend to fulfil the 0x trading protocol fee. Provided since this DAI is exchanged using Uniswap for the required ETH."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Max Trades:")," The maximum number of orders to actually fill in this TX. This is provided so that many orders may be passed in which may not end up being filled due to circumstances like order expiration/cancellation, being filled before the sender\u2019s transaction is mined, or the order creators funds dropping too low. In the event no such circumstances happen the transaction would likely exceed the provided gas limit unless a stop was in place."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Orders:")," An array of order data corresponding to the orders the sender wishes to fill."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Signatures:")," An array of signatures by the order creators corresponding to each of the provided orders.")),Object(i.b)("p",null,"The contract will iterate each order and apply the same logic used in the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#on-chain-order-filling"}),"on chain order filling")," process including taking the normally escrowed assets from the order creator to use in the trade."),Object(i.b)("h2",{id:"reporting"},"Reporting"),Object(i.b)("p",null,"Reporting in Augur is a term often used to encompass all aspects of the process of resolving markets, including the actual act of reporting on them and the potential following dispute process for challenging that report."),Object(i.b)("p",null,"Reporting and disputing both require a deposit of ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#rep"}),"REP")," which is considered lost to other reporters / disputers if the market resolves differently than the depositor is asserting. This is what provides economic incentives for both telling the truth initially and for seeking out and correcting false reports / disputes."),Object(i.b)("p",null,"For example if User A reports that outcome YES occurred and ends up staking 2 REP, but the Market resolves such that outcome NO is what occurred, that 2 REP will be distributed to the addresses that staked REP on outcome NO via the disputing process proportionally to the amount they each staked."),Object(i.b)("p",null,"In actuality the profit of the winning reporters will end up being 1.6 REP as 20% of the REP taken from losing reports / disputes is burned by the system. This is done to penalize the activity of delaying market resolution by disputing with oneself."),Object(i.b)("h3",{id:"payouts"},"Payouts"),Object(i.b)("p",null,"When a market resolves, also referred to as becoming \u201cfinalized\u201d, it will end up with a \u201cpayout\u201d. This payout is a distribution of DAI to be awarded for each ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#share"}),"Share")," corresponding to the Market\u2019s outcomes. These payouts are what is being asserted when someone reports or disputes on a market."),Object(i.b)("p",null,"Payouts are easiest to represent as an array of integers where the index of each value corresponds to a market outcome. Some examples:"),Object(i.b)("h4",{id:"yes--no-payouts"},"Yes / No Payouts"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Invalid:")," ","[","100, 0, 0","]"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Yes:")," ","[","0, 0, 100","]"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"No:")," ","[","0, 100, 0","]"),Object(i.b)("h4",{id:"categorical-payouts-3-outcome-market"},"Categorical Payouts ","(","3 outcome Market",")"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Invalid:")," ","[","100, 0, 0, 0","]"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Outcome 1:")," ","[","0, 100, 0, 0","]"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Outcome 2:")," ","[","0, 0, 100, 0","]"),Object(i.b)("h4",{id:"scalar-payouts-range-0---100-100-numticks"},"Scalar Payouts ","(","range 0 - 100, 100 numTicks",")"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Invalid:")," ","[","100, 0, 0","]"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"30:")," ","[","0, 70, 30","]"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"90:")," ","[","0, 10, 90","]"),Object(i.b)("p",null,"One issue to note is that technically at a contract level one may report a payout for a Yes/No or Categorical Market which has a distributed payout like Scalar markets do. Although it is allowed at the contract level and there are hypothetical ways to support such markets there is not yet any reporting mechanism off chain that supports these, and so they are treated as \u201cmalformed\u201d payouts assumed to be malicious."),Object(i.b)("h3",{id:"initial-report"},"Initial Report"),Object(i.b)("p",null,"When a Market reaches its configured end time it will be eligible for reporting."),Object(i.b)("p",null,"The first reported payout a market receives is referred to as the Initial Report. It is distinct from other dispute based reports for 2 reasons:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"It is a report by a single party rather than sourced from any number of addresses"),Object(i.b)("li",{parentName:"ul"},"The REP which is staked is ","(","in most cases",")"," provided by the ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/contracts/overview#rep-bond"}),"REP Bond")," given to the market at its creation.")),Object(i.b)("p",null,"The value of the initial report is at minimum ~.35 REP and will ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#float-accordingly"}),"float accordingly")," as the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#maximum-of-the-no-show-and-initial-report-bonds"}),"maximum of the No Show and Initial Report Bonds"),"."),Object(i.b)("h4",{id:"designated-report"},"Designated Report"),Object(i.b)("p",null,"The first type of Initial Report that can occur is called the \u201cDesignated Report\u201d. This is an opportunity for the Market\u2019s configured ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#designated-reporter"}),"Designated Reporter")," to provide the Initial report."),Object(i.b)("p",null,"The Designated Report may only be made during the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#initial-window"}),"Initial Window")," which essentially means the Designated Reporter has at least 24 hours to provide their report."),Object(i.b)("p",null,"If the Designated Reporter does make the initial report the Market creator will receive the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#no-show-bond"}),"No Show Bond")," back immediately. In the majority of expected cases however the Market Creator is also the Designated Reporter which means this REP will be immediately used to cover the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#initial-report-bond"}),"Initial Report Bond"),"."),Object(i.b)("h4",{id:"open-report"},"Open Report"),Object(i.b)("p",null,"If the Designated Reporter does not provide a report within their ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#allotted-window"}),"allotted window")," anyone will be allowed to provide the Initial Report. In the event this happens the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#no-show-bond"}),"No Show Bond")," is used to provide the stake for the Initial Report. If the reporter was correct this means they will have essentially been paid that REP bond by the market creator to provide the Initial Report."),Object(i.b)("h3",{id:"disputing"},"Disputing"),Object(i.b)("p",null,"In the event that a false initial report is made it is possible to dispute that payout. The core mechanism for disputing is to contribute to a different payout than the current tentative winning payout of a market. When an initial report is made it becomes the tentative winning payout. After that a new tentative winning payout can only occur by the process of disputing."),Object(i.b)("p",null,"Contributing to an alternative payout is always done via the Market contract itself by specifying an amount of REP one is willing to stake toward it. These contributions will end up going toward a Dispute Crowdsourcer Bond."),Object(i.b)("h4",{id:"dispute-crowdsourcers"},"Dispute Crowdsourcers"),Object(i.b)("p",null,"In order to allow multiple parties to participate in disputing a payout the bonds which represent these disputes take the form of crowdsourced contracts referred to as \u201cDispute Crowdsourcers\u201d. Each bond is associated with a payout that is being asserted as the correct resolution for the market."),Object(i.b)("p",null,"Dispute crowdsourcing have a \u201csize\u201d which represents the amount of REP which must be staked for it to be successful and for the market\u2019s tentative winning payout to become that of the bond."),Object(i.b)("p",null,"This size is calculated with the following formula:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-text"}),"size = 2*stake_in_all_payouts - 3*stake_in_payout_being_asserted\n")),Object(i.b)("p",null,"This formula guarantees that the profit from correctly staking REP is 50% of what is staked by the winning contributors. The actual profit for disputers as described in the first Reporting section is 40% since the remaining 10% of that initial 50% profit is burned."),Object(i.b)("p",null,"If contributions are made to a dispute but the bond size is not reached, or if a different dispute crowdsourced is filled first, the bond is considered \u201cdisavowed\u201d and contributors may get the stake they placed back immediately."),Object(i.b)("p",null,"One unusual restriction on dispute contributions is that there is a threshold of remaining value to fill a bond which may not occur. This means that once a bond is filled up to a particular amount the remaining amount must be filled entirely in any further contributions. This threshold is whatever the current ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#rep-bond"}),"REP bond")," for market creation is."),Object(i.b)("h4",{id:"fast--slow-disputing"},"Fast & Slow Disputing"),Object(i.b)("p",null,"Initially the contributions that are made to dispute the current tentative winning outcome may be made with no time restrictions. This means that as soon as a payout has been reported or has become the tentative winning payout through disputing someone may immediately dispute it. This is the phase of disputing known as \u201cFast\u201d Disputing."),Object(i.b)("p",null,"This phase is in place until a Dispute Bond is filled whose value implies there can be at most 8 more bonds until a ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#fork"}),"fork")," occurs. Once this threshold is reached contributions to disputes cannot be made until the Market\u2019s current ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#dispute-window"}),"Dispute Window")," has started. This effectively means that there is at least a 7 day gap in between disputes and provides ample time for those who wish to participate in disputing and the potentially upcoming fork to get the REP out of cold storage. This phase is known as \u201cSlow\u201d disputing."),Object(i.b)("h4",{id:"pre-emptive-contributions"},"Pre-emptive Contributions"),Object(i.b)("p",null,"Due to the nature of how a market ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#resolves"}),"resolves")," the system is vulnerable to a sort of greifing attack where an individual fills low value dispute bonds at the last possible second, dragging out the time it takes to complete."),Object(i.b)("p",null,"In order to combat this there is an option when contributing to an initial report or a dispute contribution to also contribute excess REP in reserve for the case the asserted payout is disputed. This excess REP is only limited by the threshold where disputes enter ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#slow-disputing"}),"Slow disputing")," and will be used to dispute any new tentative winning payout immediately should one occur. This allows many rounds of back and forth disputing to essentially be skipped and presents an immediate threat to any trolling party that REP staked will likely be lost."),Object(i.b)("p",null,"One important note about pre-emptive contributions is that any excess REP used this way is not guaranteed the normal 40% ROI on dispute contributions. This is because even if the pre-emptive bond is deployed it will likely be for much more REP than is actually available from losing bonds."),Object(i.b)("h4",{id:"forking"},"Forking"),Object(i.b)("p",null,"When a ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#dispute-bond"}),"Dispute Bond"),"\u2019s size reaches the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#forking-threshold"}),"forking threshold")," it will trigger a Fork. At this point the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#resolution-process"}),"resolution process")," works differently than for normal cases and the universe is in a forking state where:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"New markets may not be created"),Object(i.b)("li",{parentName:"ul"},"Existing markets may not go through the reporting process"),Object(i.b)("li",{parentName:"ul"},"Existing initial reports and dispute bonds are all disavowed and may have the staked REP returned")),Object(i.b)("p",null,"When a fork is triggered it initiates a \u201cForking Window\u201d which is a 60 day time period in which each candidate child universe, correlated with a payout, may be created and may have REP migrated to it. At the end of this 60 days REP may no longer migrate and will thus be stuck in the forking universe."),Object(i.b)("p",null,"The forking market is resolved either when:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"A child universe has 50% of the forking universe\u2019s REP supply migrated to it"),Object(i.b)("li",{parentName:"ul"},"The 60 day forking window ends.")),Object(i.b)("p",null,"In the event no universe has 50% of the REP supply migrate to it the Universe with the highest amount of REP becomes the winner."),Object(i.b)("p",null,"The winning universe\u2019s correlated payout determines how the Forking Market ultimately resolves."),Object(i.b)("p",null,"Once there is a winning universe any existing markets in the forking universe can be migrated to that winning universe. Until they are migrated they cannot be finalized. The transaction to migrate them will require a new ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#rep-bond"}),"REP bond")," and if the market is past its end time will require an ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#initial-report"}),"Initial Report")," be made."),Object(i.b)("h3",{id:"resolution--finalization"},"Resolution / Finalization"),Object(i.b)("p",null,"When a market has a tentative winning payout it must remain without any ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#dispute-bond"}),"Dispute Bond")," being filled for a full ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#dispute-window"}),"Dispute Window")," ","(","effectively 7 days",")"," before the winner becomes non-tentative. At that point the Market may be \u201cfinalized\u201d and the payout will become official."),Object(i.b)("h3",{id:"dispute-windows"},"Dispute Windows"),Object(i.b)("p",null,"Dispute Windows serve the purpose of a cadence mechanism, used for ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#reporting"}),"Reporting"),", Fee distribution, and for recalculation of ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#universe-values"}),"Universe values"),"."),Object(i.b)("p",null,"Each Dispute Window lasts 7 days."),Object(i.b)("p",null,"When a market is initially reported on or has a new dispute bond filled it is assigned the next occurring Dispute Window. As described in the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#resolution"}),"Resolution")," section the market must complete this Dispute Window without having any dispute bond fill to be finalizable. Due to this cadence and assignment it will actually mean markets must wait longer than 7 days to resolve."),Object(i.b)("h4",{id:"initial-windows"},"Initial Windows"),Object(i.b)("p",null,"Initial Windows exist only to provide a reliable cadence for the 24 hour periods afforded to ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#designated-reporters"}),"designated reporters")," to make their reports. Every market when it reaches its end time is initially assigned an Initial Window instead of a standard Dispute Window."),Object(i.b)("h4",{id:"fees--participation-tokens"},"Fees & Participation Tokens"),Object(i.b)("p",null,Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#reporting-fees"}),"Reporting fees")," which are collected during ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/contracts/overview#share-settlement"}),"Share settlement")," are always deposited into the next upcoming Dispute Window. In order to get a portion of these fees one must purchase \u201cParticipation Tokens\u201d. In fact the Dispute Windows are actually ERC20 tokens that may be generated by depositing REP when the window is \u201cactive\u201d ","(","meaning its 7 day period includes the current time",")","."),Object(i.b)("p",null,"When the Dispute Window has ended these tokens may be redeemed in order to receive the proportional amount of fees in the window. For example let's imagine a window has 10 DAI in fees and there were 100 Participation Tokens created by depositing 100 REP."),Object(i.b)("p",null,"When the window is no longer active if a user with 10 Participation tokens then redeems them they will receive both the 10 REP they used to purchase them and 1 DAI in fees."),Object(i.b)("h2",{id:"gsn"},"GSN"),Object(i.b)("p",null,"As likely anyone reading this is aware, transactions on Ethereum cost ETH to send. This is a problem for onboarding users and in general for explaining to people who simply want to engage with an application as if they were only using US dollars."),Object(i.b)("p",null,"A mechanism exists for sending transactions using only DAI through something called \u201cmeta transactions\u201d. Meta transactions are essentially signed transaction data which can be sent by anyone, and when executed will compensate the sender with funds from the original signer to make up for the ETH cost of sending the transaction."),Object(i.b)("p",null,"GSN, which stands for \u201cGas Station Network\u201d is a meta transaction framework and service. For in depth information about it one can find their docs ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"https://docs.opengsn.org/learn/"}),"here"),". As a TL;DR for purposes of explaining our integration:"),Object(i.b)("p",null,"GSN allows transaction senders to register an HTTP service with a \u201cRelay Hub\u201d that will accept and send signed meta transactions for a fee. That fee is paid by the contract which the transaction is sent to."),Object(i.b)("p",null,"The way in which we use GSN is a bit unconventional since the most often cited use case is for application developers to deposit ETH into a contract in order to pay for users transactions. Instead we have users pay for their own transactions with a wallet based system."),Object(i.b)("h3",{id:"augur-wallet"},"Augur Wallet"),Object(i.b)("p",null,"The only contract which is used within the system currently is the Augur Wallet Registry. This contract also has only a single function available to call: \u201cexecuteWalletTransaction\u201d. This function takes the following parameters:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"to:")," The contract which the user\u2019s wallet is calling in the desired transaction"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"data:")," The transaction data to use in the desired transaction call"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"value:")," The ETH value to provide in the desired transaction from the wallet"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"payment:")," The amount of DAI with this transaction is authorized to take from the wallet in order to compensate for the relay. Excess payment is refunded to the user\u2019s account ","(","not the wallet",")"," as ETH."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"referralAddress:")," The affiliate address that referred the user. This is sent in the transaction execution data since a user\u2019s wallet is created on demand as needed and this will be used to initialize their wallet."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"fingerprint:")," The browser fingerprint of the user. This is sent in the transaction execution data since a user\u2019s wallet is created on demand as needed and this will be used to initialize their wallet."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"desiredSignerBalance:")," As a matter of practicality using GSN is very expensive. In order to limit the amount of times a user must actually use GSN the Augur Wallet Registry has the functionality to request the users signing account have ETH purchased for it using the wallet\u2019s DAI. This parameter indicates the minimum amount of ETH desired to be in the user\u2019s signing account. If their ETH balance is below this value a uniswap swap will be done at the end of the transaction in order to fulfil this desired ETH balance which can be used to directly execute transactions in the future."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"maxExchangeRateInDai:")," Whenever using Uniswap there must be restrictions provided from off chain on the exchange rate to prevent malicious front running attacks or to simply guard against sudden price movement."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"revertOnFailure:")," This boolean determines whether a transaction sent without the use of a GSN relayer will revert if the underlying requested transaction reverts. Normally we do not want transactions to fail, but in order to estimate gas it is necessary to have failing underlying calls make the entire transaction revert, so this is specified as true when estimating gas cost.")),Object(i.b)("h2",{id:"warp-sync"},"Warp Sync"),Object(i.b)("p",null,"Usage of the Augur protocol with a reasonably nice UX is fairly dependent on the ability to access historical data with relative speed. Unfortunately the two prominent ways of providing such data for Ethereum applications, on chain storage or logs, are expensive and slow/unreliable respectively."),Object(i.b)("p",null,"In order to make a faster and more robust method for pulling historical data there is a mechanism within Augur called \u201cWarp Sync\u201d. The core concept behind Augur\u2019s Warp Sync is to package all Augur relevant logs into a single file whose hash can be trusted with no central authority and thus can be shared and distributed in a trustless and decentralized fashion. This way when a new user is initializing their state instead of having to pull potentially millions of logs they can instead download one compressed file."),Object(i.b)("h3",{id:"warp-sync-contract"},"Warp Sync Contract"),Object(i.b)("p",null,"The key component of the Warp Sync feature is the ability to trustlessly verify the hash of the Warp Sync file. In order to do this Augur has a built in feature where a recurring Warp Sync Hash prediction market can be created by any user in exchange for an increasing reward of minted REP. The formula for how much attoREP they will receive is as follows:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-text"}),"(time_since_create ** 3) * 1000\n")),Object(i.b)("p",null,"This provides an exponential growth amount that will also not get out of control in a time span that is manipulatable via block stuffing."),Object(i.b)("p",null,"These markets exist on a per universe basis and are not intended to be traded on. They merely exist as a way to leverage the Augur oracle for determining the correct Warp Sync hash."))}h.isMDXComponent=!0},516:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u}));var r=a(0),n=a.n(r);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=n.a.createContext({}),h=function(e){var t=n.a.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},d=function(e){var t=h(e.components);return n.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},p=n.a.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=h(a),p=r,u=d["".concat(o,".").concat(p)]||d[p]||b[p]||i;return a?n.a.createElement(u,s(s({ref:t},l),{},{components:a})):n.a.createElement(u,s({ref:t},l))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=p;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var l=2;l<i;l++)o[l]=a[l];return n.a.createElement.apply(null,o)}return n.a.createElement.apply(null,a)}p.displayName="MDXCreateElement"}}]);