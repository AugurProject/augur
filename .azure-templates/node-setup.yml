variables:
  YARN_CACHE_FOLDER: $(Pipeline.Workspace)/.yarn

steps:
- checkout: self
- task: NodeTool@0
  inputs:
    versionSpec: $(node_version)
- task: Cache@2
  inputs:
    key: yarn | $(Agent.OS) | yarn.lock
    path: $(YARN_CACHE_FOLDER)
    restoreKeys: |
      yarn | $(Agent.OS)
      yarn
    displayName: Cache Yarn packages

- script: yarn --frozen-lockfile
- script: yarn build
