variables:
    SOLC_VERSION: v0.4.24
    SOLC_MD5: dc791cd7db87b7df5e47975d222dc5fe

jobs:
  - job: Test_Augur_UI_and_Node
    displayName: 'Test augur UI and augur-node'
    pool:
      vmImage: 'Ubuntu 16.04'
    strategy:
      matrix:
        node_8_x:
          node_version: 8.x
        node_9_x:
          node_version: 9.x
    steps:
      - script: |
          yarn workspace augur-node add sqlite3 --force --build-from-source
          yarn install --ignore-scripts --frozen-lockfile
        displayName: 'Install Dependencies'
      - script: |
          yarn test --detectOpenHandles
        displayName: 'Run Tests'
      - task: PublishTestResults@2
        inputs:
          testResultsFormat: 'JUnit'
          testResultsFiles: 'junit.xml'
