"use strict";

var assert = require("chai").assert;
var abi = require("augur-abi");
var serialize = require("../../../src/utils/serialize");

describe("utils/serialize", function () {
  var test = function (t) {
    it(JSON.stringify(t.serializable) + " -> " + t.serialized, function () {
      assert.strictEqual(serialize(t.serializable), t.serialized);
    });
  };
  test({
    serializable: [1, 2, 3],
    serialized: "000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000003"
  });
  test({
    serializable: "0x07",
    serialized: "0000000000000000000000000000000000000000000000000000000000000007"
  });
  test({
    serializable: [7],
    serialized: "0000000000000000000000000000000000000000000000000000000000000007"
  });
  test({
    serializable: [1, 0, 1, 0, 1, 0, 1],
    serialized: "0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"
  });
  test({
    serializable: [0, 0, 0, 0],
    serialized: "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
  });
  test({
    serializable: [17, 100, 2],
    serialized: "000000000000000000000000000000000000000000000000000000000000001100000000000000000000000000000000000000000000000000000000000000640000000000000000000000000000000000000000000000000000000000000002"
  });
  test({
    serializable: [17, 1000, 2],
    serialized: "000000000000000000000000000000000000000000000000000000000000001100000000000000000000000000000000000000000000000000000000000003e80000000000000000000000000000000000000000000000000000000000000002"
  });
  test({
    serializable: ["0x01", "0x11"],
    serialized: "00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000011"
  });
  test({
    serializable: [1, 17],
    serialized: "00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000011"
  });
  test({
    serializable: ["0x05ae1d0ca6206c6168b42efcd1fbe0ed144e821b", "0x0f69b5", "0x041e"],
    serialized: "00000000000000000000000005ae1d0ca6206c6168b42efcd1fbe0ed144e821b00000000000000000000000000000000000000000000000000000000000f69b5000000000000000000000000000000000000000000000000000000000000041e"
  });    
  test({
    serializable: [
      0,
      "0xf69b5",
      1898028,
      "0x82a978b3f5962a5b0957d9ee9eef472ee55b42f1"
    ],
    serialized: "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f69b500000000000000000000000000000000000000000000000000000000001cf62c00000000000000000000000082a978b3f5962a5b0957d9ee9eef472ee55b42f1",
  });
  test({
    serializable: ["0x7400000000000000000000000000000000000000000000000000000000000000"],
    serialized: "7400000000000000000000000000000000000000000000000000000000000000"
  });
  test({
    serializable: [0, "0x82a978b3f5962a5b0957d9ee9eef472ee55b42f1"],
    serialized: "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000082a978b3f5962a5b0957d9ee9eef472ee55b42f1"
  });
  test({
    serializable: [
      0,
      "0x82a978b3f5962a5b0957d9ee9eef472ee55b42f1",
      "0x3078313230303030303030303030303030303030",
    ],
    serialized: "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000082a978b3f5962a5b0957d9ee9eef472ee55b42f10000000000000000000000003078313230303030303030303030303030303030"
  });
  test({
    serializable: [
      0,
      "0x82a978b3f5962a5b0957d9ee9eef472ee55b42f1",
      "0x3078313230303030303030303030303030303030",
      "0xf69b5",
      "-0x5b9fcc7b08c38be45843adb61ef9ff62aa9ac003440d83112173367f88fcbe2e"
    ],
    serialized: "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000082a978b3f5962a5b0957d9ee9eef472ee55b42f1000000000000000000000000307831323030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000f69b5a4603384f73c741ba7bc5249e106009d55653ffcbbf27ceede8cc980770341d2"
  });
  test({
    serializable: [
      0,
      "0x82a978b3f5962a5b0957d9ee9eef472ee55b42f1",
      "0x3078313230303030303030303030303030303030",
      "0xf69b5",
      "-0x5b9fcc7b08c38be45843adb61ef9ff62aa9ac003440d83112173367f88fcbe2e",
      1,
      120
    ],
    serialized: "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000082a978b3f5962a5b0957d9ee9eef472ee55b42f1000000000000000000000000307831323030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000f69b5a4603384f73c741ba7bc5249e106009d55653ffcbbf27ceede8cc980770341d200000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000078"
  });
  test({
    serializable: [
      0,
      "0x82a978b3f5962a5b0957d9ee9eef472ee55b42f1",
      "0x3078313230303030303030303030303030303030",
      "0xf69b5",
      "-0x5b9fcc7b08c38be45843adb61ef9ff62aa9ac003440d83112173367f88fcbe2e",
      1,
      120,
      "0x3078323035626330316133366532656232"
    ],
    serialized: "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000082a978b3f5962a5b0957d9ee9eef472ee55b42f1000000000000000000000000307831323030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000f69b5a4603384f73c741ba7bc5249e106009d55653ffcbbf27ceede8cc980770341d2000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000780000000000000000000000000000003078323035626330316133366532656232"
  });
  test({
    serializable: [
      0,
      "0x82a978b3f5962a5b0957d9ee9eef472ee55b42f1",
      "0x3078313230303030303030303030303030303030",
      "0xf69b5",
      "-0x5b9fcc7b08c38be45843adb61ef9ff62aa9ac003440d83112173367f88fcbe2e",
      1,
      120,
      "0x3078323035626330316133366532656232",
      2,
      1054
    ],
    serialized: "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000082a978b3f5962a5b0957d9ee9eef472ee55b42f1000000000000000000000000307831323030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000f69b5a4603384f73c741ba7bc5249e106009d55653ffcbbf27ceede8cc980770341d20000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000007800000000000000000000000000000030783230356263303161333665326562320000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000041e"
  });
  test({
    serializable: [
      0,
      "0x82a978b3f5962a5b0957d9ee9eef472ee55b42f1",
      "0x3078313230303030303030303030303030303030",
      "0xf69b5",
      "-0x5b9fcc7b08c38be45843adb61ef9ff62aa9ac003440d83112173367f88fcbe2e",
      1,
      120,
      "0x3078323035626330316133366532656232",
      2,
      1054,
      "0x3078353165623835316562383531656238"
    ],
    serialized: "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000082a978b3f5962a5b0957d9ee9eef472ee55b42f1000000000000000000000000307831323030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000f69b5a4603384f73c741ba7bc5249e106009d55653ffcbbf27ceede8cc980770341d20000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000007800000000000000000000000000000030783230356263303161333665326562320000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000041e0000000000000000000000000000003078353165623835316562383531656238"
  });
  test({
    serializable: [1844674407370955100],
    serialized: "00000000000000000000000000000000000000000000000019999999999998f8"
  });
  test({
    serializable: [1844674407370955200],
    serialized: "0000000000000000000000000000000000000000000000001999999999999a24"
  });
  test({
    serializable: ["test"],
    serialized: "74657374"
  });
  test({
    serializable: "test",
    serialized: "74657374"
  });
  test({
    serializable: [
      0,
      "0x82a978b3f5962a5b0957d9ee9eef472ee55b42f1",
      "0x3078313230303030303030303030303030303030", // initial liquidity
      "0xf69b5", // branch
      "-0x5b9fcc7b08c38be45843adb61ef9ff62aa9ac003440d83112173367f88fcbe2e",
      1, // numEvents
      120, // cumulative scale
      "0x3078323035626330316133366532656232", // alpha
      2, // numOutcomes
      1054, // tradingPeriod
      "0x3078353165623835316562383531656238", // tradingFee
      "What will the high temperature (in degrees Fahrenheit) be in San Francisco, California, on July 1, 2016?"
    ],
    serialized: "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000082a978b3f5962a5b0957d9ee9eef472ee55b42f1000000000000000000000000307831323030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000f69b5a4603384f73c741ba7bc5249e106009d55653ffcbbf27ceede8cc980770341d20000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000007800000000000000000000000000000030783230356263303161333665326562320000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000041e0000000000000000000000000000003078353165623835316562383531656238576861742077696c6c2074686520686967682074656d70657261747572652028696e20646567726565732046616872656e686569742920626520696e2053616e204672616e636973636f2c2043616c69666f726e69612c206f6e204a756c7920312c20323031363f"
  });
  test({
    serializable: ["radical-accelerations-56zrpywcyuv7vi"],
    serialized: "7261646963616c2d616363656c65726174696f6e732d35367a7270797763797576377669"
  });
  test({
    serializable: [0, "radical-accelerations-56zrpywcyuv7vi"],
    serialized: "00000000000000000000000000000000000000000000000000000000000000007261646963616c2d616363656c65726174696f6e732d35367a7270797763797576377669"
  });
  test({
    serializable: [
      0,
      "0x82a978b3f5962a5b0957d9ee9eef472ee55b42f1",
      "radical-accelerations-56zrpywcyuv7vi"
    ],
    serialized: "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000082a978b3f5962a5b0957d9ee9eef472ee55b42f17261646963616c2d616363656c65726174696f6e732d35367a7270797763797576377669"
  });
  test({
    serializable: Buffer.from("6169fdd07cb61657ad0d1c60f1132eed52c91949d6d85654110b11ede80a6d2e", "hex"),
    serialized: "0000000000000000000000000000000000000000000000000000000000000061000000000000000000000000000000000000000000000000000000000000006900000000000000000000000000000000000000000000000000000000000000fd00000000000000000000000000000000000000000000000000000000000000d0000000000000000000000000000000000000000000000000000000000000007c00000000000000000000000000000000000000000000000000000000000000b60000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000005700000000000000000000000000000000000000000000000000000000000000ad000000000000000000000000000000000000000000000000000000000000000d000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f10000000000000000000000000000000000000000000000000000000000000013000000000000000000000000000000000000000000000000000000000000002e00000000000000000000000000000000000000000000000000000000000000ed000000000000000000000000000000000000000000000000000000000000005200000000000000000000000000000000000000000000000000000000000000c90000000000000000000000000000000000000000000000000000000000000019000000000000000000000000000000000000000000000000000000000000004900000000000000000000000000000000000000000000000000000000000000d600000000000000000000000000000000000000000000000000000000000000d8000000000000000000000000000000000000000000000000000000000000005600000000000000000000000000000000000000000000000000000000000000540000000000000000000000000000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000b000000000000000000000000000000000000000000000000000000000000001100000000000000000000000000000000000000000000000000000000000000ed00000000000000000000000000000000000000000000000000000000000000e8000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000006d000000000000000000000000000000000000000000000000000000000000002e"
  });
  test({
    serializable: Buffer.from("6169fdd07cb61657ad0d1c60f1132eed52c91949d6d85654110b11ede80a6d2e", "hex").toJSON().data,
    serialized: "0000000000000000000000000000000000000000000000000000000000000061000000000000000000000000000000000000000000000000000000000000006900000000000000000000000000000000000000000000000000000000000000fd00000000000000000000000000000000000000000000000000000000000000d0000000000000000000000000000000000000000000000000000000000000007c00000000000000000000000000000000000000000000000000000000000000b60000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000005700000000000000000000000000000000000000000000000000000000000000ad000000000000000000000000000000000000000000000000000000000000000d000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000f10000000000000000000000000000000000000000000000000000000000000013000000000000000000000000000000000000000000000000000000000000002e00000000000000000000000000000000000000000000000000000000000000ed000000000000000000000000000000000000000000000000000000000000005200000000000000000000000000000000000000000000000000000000000000c90000000000000000000000000000000000000000000000000000000000000019000000000000000000000000000000000000000000000000000000000000004900000000000000000000000000000000000000000000000000000000000000d600000000000000000000000000000000000000000000000000000000000000d8000000000000000000000000000000000000000000000000000000000000005600000000000000000000000000000000000000000000000000000000000000540000000000000000000000000000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000b000000000000000000000000000000000000000000000000000000000000001100000000000000000000000000000000000000000000000000000000000000ed00000000000000000000000000000000000000000000000000000000000000e8000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000006d000000000000000000000000000000000000000000000000000000000000002e"
  });
});
